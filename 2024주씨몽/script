async function fetchTimetableData() {
    const apiUrl = 'https://open.neis.go.kr/hub/hisTimetable'; // 나이스 API URL
    const params = new URLSearchParams({
        'KEY': '39515f9e08674c3abc57e48ce8399383', // 인증키
        'Type': 'json', // 응답 형식
        'SCHUL_CODE': 'YOUR_SCHOOL_CODE', // 학교 코드 입력
        'GRADE': 'YOUR_GRADE', // 학년 입력
        'CLASS_NM': 'YOUR_CLASS_NAME' // 반 이름 입력
    });

    try {
        const response = await fetch(`${apiUrl}?${params.toString()}`);

        if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
        }

        const data = await response.json();
        console.log(data); // 데이터 확인을 위해 콘솔에 출력

        // 데이터 처리 (예: 시간표에 추가)
        displayTimetableData(data);
        
    } catch (error) {
        console.error('Error fetching timetable data:', error);
    }
}

function displayTimetableData(data) {
    const timetable = document.getElementById('timetable'); // 시간표 요소 선택
    
    // 예시: 데이터 구조에 따라 테이블에 추가
    data.hisTimetable[1].row.forEach(classInfo => {
        const row = document.createElement('tr');
        
        const cell1 = document.createElement('td');
        cell1.textContent = classInfo.PERIOD; // 교시
        row.appendChild(cell1);
        
        const cell2 = document.createElement('td');
        cell2.textContent = classInfo.SUBJECT; // 과목
        row.appendChild(cell2);
        
        timetable.appendChild(row);
    });
}

// 페이지 로드 시 데이터 가져오기
window.onload = fetchTimetableData;
